{"rows_views":[[{"style":{"borders":"","font_style":{"font-weight":"normal","font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#333333","bg_color":"rgb(155, 155, 155)","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-weight":"normal","font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#333333","bg_color":"rgb(155, 155, 155)","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-weight":"normal","font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#333333","bg_color":"rgb(155, 155, 155)","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-weight":"normal","font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#333333","bg_color":"rgb(155, 155, 155)","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}}],[{"style":{"borders":"","font_style":{"font-weight":"normal","font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"rgb(255, 255, 255)","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-weight":"normal","font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"rgb(255, 255, 255)","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-weight":"normal","font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"rgb(255, 255, 255)","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-weight":"normal","font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"rgb(255, 255, 255)","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}}],[{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}}],[{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}}],[{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}}],[{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"center","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}},{"style":{"borders":"","font_style":{"font-size":"18px","font-family":"ff-times-new-roman"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":"inherit"}}],[{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":""}},{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":""}},{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":""}},{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":""}}],[{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":""}},{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":""}},{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":""}},{"style":{"borders":"","font_style":{"font-family":"ff-times-new-roman","font-size":"18px"},"text_color":"#000000","bg_color":"#ffffff","halign":"left","valign":"top","padding":{"top":10,"right":5,"bottom":10,"left":5},"border_color":""}}]],"model":{"rows":[[{"value":"Sql","cspan":1,"rspan":1,"markup":[1,3]},{"value":"QuerySet","cspan":1,"rspan":1,"markup":[1,8]},{"value":"Notes","cspan":1,"rspan":1,"markup":[1,5]},{"value":"Detail Notes","cspan":1,"rspan":1,"markup":[1,12]}],[{"value":"UPDATE Person SET name = \"Mike\"","cspan":1,"rspan":1,"markup":[1,31]},{"value":"Person.objects.all().update(name=\"Mike\")","cspan":1,"rspan":1,"markup":[1,40]},{"value":"update()","cspan":1,"rspan":1,"markup":[1,8]},{"value":"","cspan":1,"rspan":1,"markup":[]}],[{"value":"UPDATE Person SET name = \"Mike\" WHERE id = 2;","cspan":1,"rspan":1,"markup":[1,45]},{"value":"Person.objects.filter(id=2).update(name=\"Mike\")\n","cspan":1,"rspan":1,"markup":[1,48]},{"value":"","cspan":1,"rspan":1,"markup":[]},{"value":"","cspan":1,"rspan":1,"markup":[]}],[{"value":"UPDATE Person SET age = age * 1.5;","cspan":1,"rspan":1,"markup":[1,34]},{"value":"Person.objects.update(age=F('age')*1.5)","cspan":1,"rspan":1,"markup":[1,39]},{"value":"F()","cspan":1,"rspan":1,"markup":[1,3]},{"value":"Иногда бывает необходимо изменить значение столбца в бд на основании уже имеющегося значения. \nВ этом случае мы можем использовать функцию F():","cspan":1,"rspan":1,"markup":[1,143]}],[{"value":"UPDATE Person SET ... WHERE id = 2;","cspan":1,"rspan":1,"markup":[1,35]},{"value":"bob = Person.objects.get(id=2)\nbob.name = \"Bob\"\nbob.save()","cspan":1,"rspan":1,"markup":[1,58]},{"value":"","cspan":1,"rspan":1,"markup":[]},{"value":"В этом случае Django полностью обновляет объект, все его свойства, даже если мы их не изменяли.","cspan":1,"rspan":1,"markup":[1,95]}],[{"value":"UPDATE Person SET name = \"Bobic\" WHERE id = 2;","cspan":1,"rspan":1,"markup":[1,46]},{"value":"bob = Person.objects.get(id=2)\nbob.name = \"Bobic\"\nbob.save(update_fields=[\"name\"])","cspan":1,"rspan":1,"markup":[1,82]},{"value":"","cspan":1,"rspan":1,"markup":[]},{"value":"Чтобы указать, что нам надо обновить только определенные поля, следует использовать параметр update_fields:","cspan":1,"rspan":1,"markup":[1,107]}],[{"value":"","cspan":1,"rspan":1,"markup":[]},{"value":"obj, created = Person.objects.update_or_create(\n    first_name='John', last_name='Lennon',\n    defaults={'first_name': 'Bob'},\n)","cspan":1,"rspan":1,"markup":[1,128]},{"value":"update_or_create()","cspan":1,"rspan":1,"markup":[1,18]},{"value":"https://docs.djangoproject.com/en/3.0/ref/models/querysets/#update-or-create\nA convenience method for updating an object with the given kwargs, creating a new one if necessary. The defaults is a dictionary of (field, value) pairs used to update the object.\nReturns a tuple of (object, created), where object is the created or updated object and created is a boolean specifying whether a new object was created.\n","cspan":1,"rspan":1,"markup":[1,411]}],[{"value":"UPDATE `page`\nSET `page_token` = \nCASE WHEN (`page`.`id_page` = 28) THEN 'New 1'\nWHEN (`page`.`id_page` = 29) THEN 'New 2'\nELSE NULL\nEND\nWHERE `page`.`id_page` IN (28, 29)","cspan":1,"rspan":1,"markup":[1,171]},{"value":">>> obj = [Page.objects.create(page_token=\"Test 1\"), \nPage.objects.create(page_token=\"Test 2\")]\n>>> obj[0].page_token =\"New 1\"\n>>> obj[1].page_token =\"New 2\"\n>>> Page.objects.bulk_update(obj, ['page_token'])\n","cspan":1,"rspan":1,"markup":[1,208]},{"value":"bulk_update()","cspan":1,"rspan":1,"markup":[1,13]},{"value":"https://docs.djangoproject.com/en/3.0/ref/models/querysets/#bulk-update \nbulk_update(objs, fields, batch_size=None)\nThis method efficiently updates the given fields on the provided model instances, generally with one query:","cspan":1,"rspan":1,"markup":[1,223]}]]},"theme":{"ColorTheme":"Default","BorderTheme":"All borders"},"fixed_layout":false,"markup":{"instances":[{},{"style":{}},null]},"options":{}}